# íšŒì› ë“±ê¸‰ì— ë”°ë¥¸ ê²Œì‹œíŒ ì ‘ê·¼ì œì–´ ë° ì´ìš© í†µê³„ ì„œë¹„ìŠ¤ 

|ğŸ‘‰ ëª©ì°¨||
|---|---|
|[1. ìš”êµ¬ì‚¬í•­ ë¶„ì„](#ìš”êµ¬ì‚¬í•­-ë¶„ì„)| ê° ìš”êµ¬ì‚¬í•­ ë¶„ì„|
|[2. API ëª…ì„¸ì„œ](#API-ëª…ì„¸ì„œ)| swagger url|
|[3. êµ¬í˜„ ê³¼ì •](#êµ¬í˜„-ê³¼ì •)| ê¸°ìˆ ìŠ¤íƒ, ëª¨ë¸ë§, í´ë” êµ¬ì¡°, ì—­í•  ë¶„ë‹´|
|[4. í…ŒìŠ¤íŠ¸](#í…ŒìŠ¤íŠ¸)| ê° ì„œë¹„ìŠ¤ unit test |
|[5. ì„œë¹„ìŠ¤ ë°°í¬](#ì„œë¹„ìŠ¤-ë°°í¬)| service url|

íšŒì› ë“±ê¸‰ì— ë”°ë¼ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê²Œì‹œíŒì„ ì œí•œí•˜ê³ , ì‚¬ìš©ìë“¤ì˜ ì´ìš© í†µê³„ ì •ë³´ë¥¼ ì´ìš©í•  ìˆ˜ ìˆëŠ” ë°±ì—”ë“œ ì„œë¹„ìŠ¤ ì…ë‹ˆë‹¤. 

íšŒì› ë“±ê¸‰ì— ë”°ë¼ ê²Œì‹œíŒì— ëŒ€í•œ ì ‘ê·¼ ì œì–´ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.  
ì ‘ê·¼ ì œì–´ì˜ ì˜ˆì‹œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.  

- ê³µì§€ì‚¬í•­ ê²Œì‹œíŒ 
  - ê´€ë¦¬ì ë“±ê¸‰ì˜ íšŒì›ì€ ê³µì§€ì‚¬í•­ ê²Œì‹œíŒì—ì— ê²Œì‹œê¸€ì„ ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
  - ì¼ë°˜ ë“±ê¸‰ì˜ íšŒì›ì€ ê³µì§€ì‚¬í•­ ê²Œì‹œíŒì—ì„œ ê²Œì‹œê¸€ì„ ì¡°íšŒ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
  
- ììœ  ê²Œì‹œíŒ
  - ê´€ë¦¬ì ë“±ê¸‰ì˜ íšŒì›ì€ ììœ  ê²Œì‹œíŒì— ê²Œì‹œê¸€ì„ ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - ì¼ë°˜ ë“±ê¸‰ì˜ íšŒì›ì€ ììœ  ê²Œì‹œíŒì— ê²Œì‹œê¸€ì„ ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
 
- ìš´ì˜ ê²Œì‹œíŒ
  - ê´€ë¦¬ì ë“±ê¸‰ì˜ íšŒì›ì€ ìš´ì˜ ê²Œì‹œíŒì— ê²Œì‹œê¸€ì„ ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
  - ì¼ë°˜ ë“±ê¸‰ì˜ íšŒì›ì€ ìš´ì˜ ê²Œì‹œíŒì— ëŒ€í•´ ì•„ë¬´ëŸ° ì‘ì—…ì„ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. 

*ê° íšŒì›ì€ ìì‹ ì´ ì‘ì„±í•œ ê²Œì‹œê¸€ë§Œ ì‚­ì œ, ìˆ˜ì • í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

# ìš”êµ¬ì‚¬í•­ ë¶„ì„  
[ìš”êµ¬ì‚¬í•­ ì›ë¬¸](https://github.com/Preonboarding-Nest/blog-api-service/files/9486215/default.pdf)

## 1. íšŒì› ìƒì„±/ì¡°íšŒ/ìˆ˜ì •/ì‚­ì œ  
  
- íšŒì› ì •ë³´ëŠ” `ê³ ê°ëª…`, `íšŒì›ë“±ê¸‰`, `ì„±ë³„`, `ë‚˜ì´`, `ì—°ë½ì²˜`, `ê°€ì…ì¼`, `ë§ˆì§€ë§‰ ì ‘ì†ì¼` ì´ë‹¤. 
- íšŒì› ìƒì„±(íšŒì› ê°€ì…), ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ(íšŒì› íƒˆí‡´) ê¸°ëŠ¥ì— ì¶”ê°€ë¡œ `ë¡œê·¸ì¸`, `ë¡œê·¸ì•„ì›ƒ` ê¸°ëŠ¥ì´ í•„ìš”.

## 2. ê²Œì‹œê¸€ ìƒì„±/ì¡°íšŒ/ìˆ˜ì •/ì‚­ì œ 

- ê° ê²Œì‹œíŒ(ê³µì§€ì‚¬í•­, ììœ ê²Œì‹œíŒ, ìš´ì˜ ê²Œì‹œíŒ)ì— ì†Œì†ë˜ëŠ” ê²Œì‹œê¸€ì„ ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ í•œë‹¤. 

## 3. íšŒì› ë“±ê¸‰ì— ë”°ë¥¸ ê²Œì‹œíŒ ê¸°ëŠ¥ ì ‘ê·¼ ì œì–´ 

- íšŒì›ì˜ ë“±ê¸‰ì— ë”°ë¼ ê° ê²Œì‹œíŒì— ëŒ€í•˜ì—¬ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì´ ë‹¤ë¥´ë„ë¡ í•œë‹¤.

  - ê³µì§€ì‚¬í•­ ê²Œì‹œíŒ 
    - ê´€ë¦¬ì ë“±ê¸‰ì˜ íšŒì›ì€ ê³µì§€ì‚¬í•­ ê²Œì‹œíŒì—ì„œ ê²Œì‹œê¸€ì„ ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ í•  ìˆ˜ ìˆë‹¤.
    - ì¼ë°˜ ë“±ê¸‰ì˜ íšŒì›ì€ ê³µì§€ì‚¬í•­ ê²Œì‹œíŒì—ì„œ ê²Œì‹œê¸€ì„ ì¡°íšŒ í•  ìˆ˜ ìˆë‹¤.

  - ììœ  ê²Œì‹œíŒ
    - ê´€ë¦¬ì ë“±ê¸‰ì˜ íšŒì›ì€ ììœ  ê²Œì‹œíŒì— ê²Œì‹œê¸€ì„ ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ í•  ìˆ˜ ìˆë‹¤.
    - ì¼ë°˜ ë“±ê¸‰ì˜ íšŒì›ì€ ììœ  ê²Œì‹œíŒì— ê²Œì‹œê¸€ì„ ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ í•  ìˆ˜ ìˆë‹¤.

  - ìš´ì˜ ê²Œì‹œíŒ
    - ê´€ë¦¬ì ë“±ê¸‰ì˜ íšŒì›ì€ ìš´ì˜ ê²Œì‹œíŒì— ê²Œì‹œê¸€ì„ ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ í•  ìˆ˜ ìˆë‹¤. 
    - ì¼ë°˜ ë“±ê¸‰ì˜ íšŒì›ì€ ìš´ì˜ ê²Œì‹œíŒì— ëŒ€í•´ ì•„ë¬´ëŸ° ì‘ì—…ì„ í•  ìˆ˜ ì—†ë‹¤.

## 4. ì´ìš© í†µê³„ ì§‘ê³„

í†µê³„ ë°ì´í„°ëŠ” ë‹¤ìŒì˜ ìœ í˜•ì„ ì œê³µí•œë‹¤.  

- ì¼ì • ì‹œê°„ë‚´ì˜
    - ë‚¨ì„± / ì—¬ì„± íšŒì› ì ‘ì†ì ìˆ˜
    - ë‚˜ì´ëŒ€(10/20/30/40/50/60~)ì— ë”°ë¥¸ ì ‘ì†ì ìˆ˜
    - ë“±ê¸‰ë³„ ì ‘ì†ì ìˆ˜
    - ì¼ì¼ / ì£¼ê°„ / ì›”ê°„ ì ‘ì†ì ìˆ˜
    - íšŒì›ê°€ì… ìˆ˜
    - íšŒì›íƒˆí‡´ ìˆ˜

# API ëª…ì„¸ì„œ

swaggerë¥¼ ì‚¬ìš©í•˜ì—¬ ì œì‘í•œ API Docs

[ğŸ‘‰ Swagger Docs ë°”ë¡œê°€ê¸°](https://app.swaggerhub.com/apis-docs/preonboarding/blog-api-service/1.0)

# êµ¬í˜„ ê³¼ì • 

## ê¸°ìˆ  ìŠ¤íƒ 
- Framework: `NestJS`
- Database: `AWS RDS - postgres`
- ORM: `TypeORM`


## í™˜ê²½ ì„¸íŒ…

### ëª¨ë¸ë§

> ë°ì´í„°ë² ì´ìŠ¤ëŠ” AWS LightSailë¡œ ìƒì„±í–ˆìŠµë‹ˆë‹¤.(RDS, PostgreSQL) 

![ëª¨ë¸ë§](https://user-images.githubusercontent.com/63445753/188299953-62432aae-8f5d-4876-8b26-0169015c05cf.png) 

### í´ë” êµ¬ì¡°
```
project/
â”œâ”€ src/
â”‚  â”œâ”€ users/
â”‚  â”œâ”€ posts/
â”‚  â”œâ”€ auth/
â”‚  â”œâ”€ statistics/
â”‚  â”œâ”€ commons/
â”‚  â”œâ”€ database/
â”‚  â”œâ”€ filters/
â”‚  â”œâ”€ interceptors/
â”‚  â”œâ”€ redis/
â”œâ”€ app.controller.ts
â”œâ”€ app.module.ts
â”œâ”€ app.service.ts
â”œâ”€ main.ts
```

- users, posts, auth, statistics í´ë”ë¥¼ ë‹¤ëˆ„ê³ , DTO ë° Entityë¥¼ ì‘ì„±í•˜ì—¬ í…Œì´ë¸” ìƒì„±  
ê° í´ë”ì— module, controller, service, dto, entity ê°€ ì •ì˜ë˜ì–´ ìˆìŒ  
ê° module Emfdmf app.moduleì—ì„œ í†µí•©  
  
- commons : ëª¨ë“  ì„œë¹„ìŠ¤ì—ì„œ ê³µìš©ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” decorator, enum ë“±ì„ ì €ì¥

- filters: ì˜ˆì™¸ í•„í„° ì ìš©

- interceptors: response type ì ìš©

- redis: cache memory ì—°ê²°

## ì—­í•  ë¶„ë‹´ ğŸ§‘â€ğŸ’»

| ì´ë¦„ | ê°œë°œ íŒŒíŠ¸ | ê·¸ ì™¸|
|---|---|---|
| ê¹€ì„±ì§„ | User API | User Service Unit Test |
| ë°•ìˆ˜ì • | Auth API | ë°°í¬, Auth Service Unit Test |
| ì†¡í•˜ë¦¼ | Statistics | Response Format ì ìš© |
| ì¸ìƒìš´ | Post API | Post Service Unit Test |

# í…ŒìŠ¤íŠ¸ 

### í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€

#### Users service

- createUser
  - user ìƒì„± ì—¬ë¶€ ê²€ì¦
  - email ì¤‘ë³µì‹œ BadRequestException ê²€ì¦
- findUserById
  - user ì¡°íšŒ ê²€ì¦
  - ì¡´ì¬í•˜ì§€ ì•ŠëŠ” user ì¡°íšŒì‹œ NotFoundException ê²€ì¦
  - ì‚­ì œëœ user ì¡°íšŒì‹œ NotFoundException ê²€ì¦
- removeUserById
  - user ì‚­ì œ ê²€ì¦ (= ì‚­ì œëœ user ì¡°íšŒì‹œ NotFoundException ê²€ì¦)
  - ì¡´ì¬í•˜ì§€ ì•ŠëŠ” user ì‚­ì œì‹œ NotFoundException ê²€ì¦

#### Auth service
findUser
  - return user by email
  - return 404 error for finding user by email
  - return user by id
  - return 404 error for finding user by id

login
  - return tokens by email and id
  - return 401 error not making tokens
  - login success
  - return 404 error not existing user
  - return 404 error
 
logout
  - return true by id and logout
  - return 404 error not removing rt to redis

token
  - return accesstoken by id and refresh
  - return 404 error not getting rt to redis

#### Posts service
- ê²Œì‹œê¸€ ë“±ë¡
  - ììœ  ê²Œì‹œíŒ ê²Œì‹œê¸€ ë“±ë¡ (ìœ ì €: ì„±ê³µ, ê´€ë¦¬ì: ì„±ê³µ)
  - ê³µì§€ ê²Œì‹œíŒ ê²Œì‹œê¸€ ë“±ë¡ (ìœ ì €: ì‹¤íŒ¨, ê´€ë¦¬ì: ì„±ê³µ)
  - ìš´ì˜ ê²Œì‹œíŒ ê²Œì‹œê¸€ ë“±ë¡ (ìœ ì €: ì‹¤íŒ¨, ê´€ë¦¬ì: ì„±ê³µ)
- ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ
  - ììœ  ê²Œì‹œíŒ ì¡°íšŒ (ìœ ì €: ì„±ê³µ, ê´€ë¦¬ì: ì„±ê³µ)
  - ê³µì§€ ê²Œì‹œíŒ ì¡°íšŒ (ìœ ì €: ì„±ê³µ, ê´€ë¦¬ì: ì„±ê³µ)
  - ìš´ì˜ ê²Œì‹œíŒ ì¡°íšŒ (ìœ ì €: ì‹¤íŒ¨, ê´€ë¦¬ì: ì„±ê³µ)
- ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ
  - ììœ  ê²Œì‹œíŒ ì¡°íšŒ (ìœ ì €: ì„±ê³µ, ê´€ë¦¬ì: ì„±ê³µ)
  - ê³µì§€ ê²Œì‹œíŒ ì¡°íšŒ (ìœ ì €: ì„±ê³µ, ê´€ë¦¬ì: ì„±ê³µ)
  - ìš´ì˜ ê²Œì‹œíŒ ì¡°íšŒ (ìœ ì €: ì‹¤íŒ¨, ê´€ë¦¬ì: ì„±ê³µ)

  
### í…ŒìŠ¤íŠ¸ ê²°ê³¼

#### Users service

![User service unit test result](https://user-images.githubusercontent.com/63445753/188340934-4e9e3569-4eb8-4f8b-a064-0ca4e8e91b38.png)

#### Auth Service

![image](https://user-images.githubusercontent.com/71163016/188348898-7a25c0a7-918c-4210-95c1-8abc6a9fcfd1.png)

#### Posts Service
![image](https://user-images.githubusercontent.com/81298415/188384988-66dbfd3c-f853-4dcd-85f2-7c0e894c2908.png)


# ì„œë¹„ìŠ¤ ë°°í¬ 

> GCP Compute Engineì— docker composeë¥¼ ì‚¬ìš©í•´ ë°°í¬í•˜ì˜€ìŠµë‹ˆë‹¤.

ğŸ‘‰ http://34.64.203.1:4000/
